\chapter{tgen }
\hypertarget{index}{}\label{index}\index{tgen@{tgen}}
\label{index_md_README}%
\Hypertarget{index_md_README}%
   \hypertarget{index_autotoc_md0}{}\doxysection{\texorpdfstring{Overview}{Overview}}\label{index_autotoc_md0}
{\ttfamily tgen} is a {\ttfamily C++} library to help you generate random stuff, useful for testcase generation (such as \href{https://github.com/ifsmirnov/jngen}{\texttt{jngen}} or \href{https://github.com/MikeMirzayanov/testlib}{\texttt{testlib}}). The code is in a single file \href{https://github.com/brunomaletta/tgen/blob/main/src/tgen.h}{\texttt{tgen.\+h}}, that should be added to your directory.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}tgen.h"{}}}

\end{DoxyCode}


The first thing is to \href{https://brunomaletta.github.io/tgen/group__opts.html}{\texttt{register the generator}}. That defines the seed for random generation and parses the opts.

There are \href{https://brunomaletta.github.io/tgen/group__general.html}{\texttt{general operations}} and operations for specific data types\+:


\begin{DoxyItemize}
\item \href{https://brunomaletta.github.io/tgen/group__sequence.html}{\texttt{Sequences}}
\end{DoxyItemize}\hypertarget{index_autotoc_md1}{}\doxysubsubsection{\texorpdfstring{Type generators and instances}{Type generators and instances}}\label{index_autotoc_md1}
All types specified above define a {\bfseries{generator}}, that when called upon will generate a uniformly random {\bfseries{instance}} with the given constraints. Let\textquotesingle{}s see an example with {\ttfamily \doxylink{structtgen_1_1sequence}{tgen\+::sequence}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{structtgen_1_1sequence}{tgen::sequence<int>}}\ seq\_gen\ =\ \mbox{\hyperlink{structtgen_1_1sequence}{tgen::sequence<int>}}(\textcolor{comment}{/*size=*/}10,\ \textcolor{comment}{/*value\_l=*/}1,\ \textcolor{comment}{/*value\_r=*/}100);}

\end{DoxyCode}


This will create a sequence generator representing the set of all sequences with 10 values from 1 to 100.

Every generator of type {\ttfamily GEN} has a method {\ttfamily gen()}, that returns a {\ttfamily GEN\+::instance} representing an element chosen uniformly at random from the set of all valid elements from the current state of the generator. A {\ttfamily GEN\+::instance} can be fed to {\ttfamily std\+::cout} to be printed.

In our example, we can call {\ttfamily gen()} to generate and print a random sequence of 10 elements from 1 to 100.


\begin{DoxyCode}{0}
\DoxyCodeLine{std::cout\ <<}
\DoxyCodeLine{\ \ \ \ seq\_gen.\mbox{\hyperlink{group__sequence__gen_ga0dc45ca71b1cc8087eac28188334dc91}{gen}}()\ <<\ std::endl;}

\end{DoxyCode}


The nice thing is that we can add restrictions (specific to each type) to the generator, shrinking the set of valid arrays. For example, we can add the restriction that the first and second elements of the sequence have to be the same.


\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{structtgen_1_1sequence_1_1instance}{tgen::sequence<int>::instance}}\ inst\ =\ seq\_gen.\mbox{\hyperlink{group__sequence__gen_ga4beb1b5e29f21f329346d005fada1c9b}{equal}}(\textcolor{comment}{/*idx\_1=*/}0,\ \textcolor{comment}{/*idx\_2=*/}1).\mbox{\hyperlink{group__sequence__gen_ga0dc45ca71b1cc8087eac28188334dc91}{gen}}();}

\end{DoxyCode}


The returned instance can also be modified by some deterministic operations (specific to each type).


\begin{DoxyCode}{0}
\DoxyCodeLine{inst.\mbox{\hyperlink{group__sequence__inst_ga2fef50f7e022b0432142fd19ef2f6bad}{reverse}}();}

\end{DoxyCode}


Finally, there can be random operations defined for the type instance.


\begin{DoxyCode}{0}
\DoxyCodeLine{std::cout\ <<}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{group__sequence__op_ga2d3aae3685b2a2003d737cfa3221f367}{tgen::sequence\_op::any}}(inst)\ <<\ std::endl;}

\end{DoxyCode}


Combining everything into one line\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{std::cout\ <<\ \mbox{\hyperlink{group__sequence__op_ga2d3aae3685b2a2003d737cfa3221f367}{tgen::sequence\_op::any}}(}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{structtgen_1_1sequence}{tgen::sequence<int>}}(10,\ 1,\ 100).equal(0,\ 1).gen()}
\DoxyCodeLine{\ \ \ \ .reverse()}
\DoxyCodeLine{)\ <<\ std::endl;}

\end{DoxyCode}
\hypertarget{index_autotoc_md2}{}\doxysubsection{\texorpdfstring{Examples}{Examples}}\label{index_autotoc_md2}
\hypertarget{index_autotoc_md3}{}\doxysubsubsection{\texorpdfstring{Opts configuration}{Opts configuration}}\label{index_autotoc_md3}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}tgen.h"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ main(\textcolor{keywordtype}{int}\ argc,\ \textcolor{keywordtype}{char}**\ argv)\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{group__opts_gae8eca919976894c15b44713f00f33bd8}{tgen::register\_gen}}(argc,\ argv);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{int}\ n\_max\ =\ \mbox{\hyperlink{group__opts_ga3a0c1de577e6b0c2bf1e119107f274db}{tgen::opt<int>}}(\textcolor{stringliteral}{"{}n"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ std::cout\ <<\ \mbox{\hyperlink{group__general_gaa007cf5e254380332a3548711d5f9b16}{tgen::next}}(1,\ n)\ <<\ std::endl;}
\DoxyCodeLine{\}}

\end{DoxyCode}


Calling this code with {\ttfamily ./a.out -\/n 100} will generate a random number from 1 to 100.\hypertarget{index_autotoc_md4}{}\doxysubsubsection{\texorpdfstring{Generation}{Generation}}\label{index_autotoc_md4}
Random 20 distinct values from 1 to 100.


\begin{DoxyCode}{0}
\DoxyCodeLine{std::cout\ <<}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{structtgen_1_1sequence}{tgen::sequence<int>}}(20,\ 1,\ 100).\mbox{\hyperlink{group__sequence__gen_gaeb0baa4e6c780d8bc1d832514b6fcacd}{distinct}}().\mbox{\hyperlink{group__sequence__gen_ga0dc45ca71b1cc8087eac28188334dc91}{gen}}()\ <<\ std::endl;}
\DoxyCodeLine{\textcolor{comment}{//\ "{}67\ 96\ 80\ 11\ 46\ 52\ 42\ 2\ 93\ 1\ 28\ 3\ 48\ 82\ 90\ 99\ 53\ 98\ 94\ 88"{}}}

\end{DoxyCode}


Random Palindrome of length 7.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{auto}\ s\ =\ \mbox{\hyperlink{structtgen_1_1sequence}{tgen::sequence<int>}}(7,\ 0,\ 9);}
\DoxyCodeLine{\textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <=\ 2;\ ++i)\ s.equal(i,\ 6-\/i);}
\DoxyCodeLine{cout\ <<\ s.gen()\ <<\ endl;}
\DoxyCodeLine{\textcolor{comment}{//\ "{}3\ 1\ 9\ 6\ 9\ 1\ 3"{}}}

\end{DoxyCode}


Random 3 runs of 4 equal numbers. Values between runs are distinct.


\begin{DoxyCode}{0}
\DoxyCodeLine{std::cout\ <<}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{structtgen_1_1sequence}{tgen::sequence<int>}}(12,\ 1,\ 10)}
\DoxyCodeLine{\ \ \ \ .\mbox{\hyperlink{group__sequence__gen_gaa6ca6fc2e5c9edcf0d25165f9f25ad12}{equal\_range}}(0,\ 3).\mbox{\hyperlink{group__sequence__gen_gaa6ca6fc2e5c9edcf0d25165f9f25ad12}{equal\_range}}(4,\ 7).\mbox{\hyperlink{group__sequence__gen_gaa6ca6fc2e5c9edcf0d25165f9f25ad12}{equal\_range}}(8,\ 11)}
\DoxyCodeLine{\ \ \ \ .\mbox{\hyperlink{group__sequence__gen_gaeb0baa4e6c780d8bc1d832514b6fcacd}{distinct}}(\{0,\ 4,\ 8\}).gen()\ <<\ endl;}
\DoxyCodeLine{\textcolor{comment}{//\ "{}3\ 3\ 3\ 3\ 2\ 2\ 2\ 2\ 9\ 9\ 9\ 9"{}}}

\end{DoxyCode}


Random DNA sequence of length 8 with no equal adjacent values.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{auto}\ s2\ =\ \mbox{\hyperlink{structtgen_1_1sequence}{tgen::sequence}}(8,\ \{\textcolor{charliteral}{'A'},\textcolor{charliteral}{'C'},\textcolor{charliteral}{'G'},\textcolor{charliteral}{'T'}\});}
\DoxyCodeLine{\textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 1;\ i\ <\ 8;\ i++)\ s2.\mbox{\hyperlink{group__sequence__gen_gad430f6b0f40960ff302eabbcaaba7b68}{different}}(i-\/1,\ i);}
\DoxyCodeLine{cout\ <<\ s2.\mbox{\hyperlink{group__sequence__gen_ga0dc45ca71b1cc8087eac28188334dc91}{gen}}()\ <<\ endl;}
\DoxyCodeLine{\textcolor{comment}{//\ "{}T\ C\ T\ G\ T\ G\ A\ C"{}}}

\end{DoxyCode}


Random binary sequence of length 10 with 5 1\textquotesingle{}s that start with 1.


\begin{DoxyCode}{0}
\DoxyCodeLine{std::cout\ <<}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{structtgen_1_1sequence}{tgen::sequence<int>}}(10,\ 0,\ 1)}
\DoxyCodeLine{\ \ \ \ .\mbox{\hyperlink{group__sequence__gen_gaff196db1265936038bcb8761192f5a8c}{set}}(0,\ 1)}
\DoxyCodeLine{\ \ \ \ .\mbox{\hyperlink{group__sequence__gen_gaf614e6563861fb01b5de5f22c4beab2e}{gen\_until}}([](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ inst)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ vec\ =\ inst.\mbox{\hyperlink{group__sequence__inst_gaad19beb57245e1e5ec4cc4ac5bd9030e}{to\_std}}();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ accumulate(vec.begin(),\ vec.end(),\ 0)\ ==\ 5;}
\DoxyCodeLine{\ \ \ \ \},\ 100)\ <<\ endl;}
\DoxyCodeLine{\textcolor{comment}{//\ "{}1\ 0\ 0\ 1\ 0\ 1\ 1\ 0\ 1\ 0"{}}}

\end{DoxyCode}
 